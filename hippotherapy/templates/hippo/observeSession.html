{% extends "base.html" %}

{% block recordActive %}navigationActive{% endblock %}
{% block title %}Amber|Observations{% endblock title %}

{% block content %}
	<div id="observationContainer">
		<!-- Secondary breadcrumb navigation 
		Allows user to go back to Home page, go back to the list of clients
		or the last session for this client page -->
		<nav class="breadcrumbNavigation">
			<!-- Home Page -->
			<a href="{% url 'home' %}" class="breadcrumbLink">Home</a>
			<!-- List of clients -->
			&raquo;
			<a href="{% url 'selectClient' 'recordSession' %}" class="breadcrumbLink">Select Client</a>
			<!-- Last session for this client -->
			{% if last_session|add:"0" != 0 %}
				&raquo;
				<a href="{% url 'newCourse' client.id last_session %}" class="breadcrumbLink">Last Session</a>
			{% endif %}
			<!-- Record session details -->
			&raquo;
			<a href="{% url 'recordSession' client.id last_session %}" class="breadcrumbLink">Record Session</a>
			<!-- This page -->
			  &raquo;  Observe Session
		</nav>
		
		<h1>Hippotherapy Session Observations</h1>
		
		{% include 'includes/session-details.html' %}
		
		<p class="allRequired">Note: you must provide a score for each skill within every function</p>
		<form id="observationForm" method="POST" action="">
			<!-- Whenever we're posting information in Django,
			we need to add the CSRF or cross-site request forgery token.
			This token is a randomly generated unique value which will be added
			to the form as a hidden input field when the forms submitted.
			And works to guarantee that the data we're posting is actually coming from our
			todo list app and not from another website. -->
			{% csrf_token %}
			
			<input type="hidden" name="last_session" value="{{ last_session }}">
			
			<div id="accordion" class="observationAccordion">
				{% for function in functions %}
			  	<h3>{{ function.function_name }}<span class="tapHint">&emsp;(Tap on a hint see it in full)</span></h3>
				  <div class="skill">
				    {% for skill in skills %}
				    	{% if skill.function_id == function.id %}
				    		<div class="skillDetails">
					    		<div class="skillName">
					    			{{ skill.skill_name }}
					    		</div>
					    		<div class="skillHints">
					    			{% for hint in hints %}
					    				{% if hint.skill_id == skill.id %}
					    					<div class="skillHint">{{ hint.hint_name }}</div>
					    				{% endif %}
					    			{% endfor %}
					    		</div>
					    		<div class="skillScores">
					    			{% for i in score_range %}
						    				<input type="radio" id="{{function.function_name|slugify}}-{{skill.skill_name|slugify}}{{ i }}" name="score{{ skill.id }}" 
						    					class="formRadioInput" value="{{ i }}" 
						    					{% for score in previous %}
													{% if score.skill == skill.id %}
														{% if score.score == i %}
															checked
														{% endif %}
													{% endif %}
												{% endfor %}
						    					>
											<label for="{{function.function_name|slugify}}-{{skill.skill_name|slugify}}{{ i }}" class="formRadioLabel">
												<span class="formRadioButton"></span>
												<span class="formRadioLabelText skillScoreLabel">{{ i }}</span>
											</label>
					    			{% endfor %}
					    		</div>
				    		</div>
			    		{% endif %}
				    {% endfor %}
				  </div>
				{% endfor %}
			</div>
			<p class="allRequired">Have you scored all skills in every function?</p>
			<div class="btnGroup largeRow">
				<input type="submit" class="btn btnMain" value="Save Observations" />
				<a href="{% url 'home' %}" class="btn btnGhost">Cancel</a>
				<input type="reset" class="btn btnTextOnly" value="Reset Form" />
			</div>
		</form>
		
	</div>


{% endblock content %}
